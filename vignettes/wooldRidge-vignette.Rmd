---
title: "Example from Chapter 4"
author: "Justin M Shea"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Effect of Job Training on Firm Scrap Rates

From example 4.7 of the text:

> "The scrap rate for a manufacturing firm is t he number of defective items-
products that must be discarded-out of every 100 produced. Thus, for a given number of items 
produced, a decrease in the scrap rate reflects higher worker productivity."

> "We can use the scrap rate to measure the effect of worker training on productivity.
Using the data in jtrain.RAW, but only for the year 1987 and for nonunionized firms,
we obtain the following estimated equation:"

```{r, echo = TRUE, eval = TRUE, warning=FALSE}

library(wooldRidge)

# Check to see if the jtrain data set is loaded
  str(jtrain)

# Create an index of which values happen in 1987 and are non-union
 index <- jtrain$year == 1987 & jtrain$union == 0

# Next, subset clean data, by the index to return nonunion firms in 1987
 jtrain_index <- jtrain[index,]

# Now, create the linear model and view results
  linear_model <- lm(lscrap ~ hrsemp + lsales + lemploy, data = jtrain_index)
  summary(linear_model)

# Visualize
  plot(linear_model)

```

